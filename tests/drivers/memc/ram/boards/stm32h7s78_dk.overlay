/*
 * Copyright (c) 2025 STMicroelectronics
 * SPDX-License-Identifier: Apache-2.0
 */

/delete-node/ &xspi1;

&sram1 {
	status = "disabled";
};
&sram2 {
	status = "disabled";
};

/ {
    soc {
		xspi1: spi@52005000 {
			compatible = "st,stm32-xspi-controller";
			reg = <0x52005000 0x1000>, <0x90000000 DT_SIZE_M(256)>;
			interrupts = <105 0>;
			clock-names = "xspix";
			clocks = <&rcc STM32_CLOCK(AHB5, 5)>;
			#address-cells = <1>;
			#size-cells = <0>;

            pinctrl-0 = <&xspim_p1_ncs1_po0 &xspim_p1_dqs0_po2
            &xspim_p1_dqs1_po3 &xspim_p1_clk_po4
            &xspim_p1_io0_pp0 &xspim_p1_io1_pp1 &xspim_p1_io2_pp2
            &xspim_p1_io3_pp3 &xspim_p1_io4_pp4 &xspim_p1_io5_pp5
            &xspim_p1_io6_pp6 &xspim_p1_io7_pp7 &xspim_p1_io8_pp8
            &xspim_p1_io9_pp9 &xspim_p1_io10_pp10 &xspim_p1_io11_pp11
            &xspim_p1_io12_pp12 &xspim_p1_io13_pp13 &xspim_p1_io14_pp14
            &xspim_p1_io15_pp15>;
            pinctrl-names = "default";
            status = "okay";

            memc: aps256xxn-obr@0 {
		compatible = "mspi-aps256";
		reg = <0>;
		size = <DT_SIZE_M(256)>;
		mspi-max-frequency = <48000000>;
		mspi-io-mode = "MSPI_IO_MODE_QUAD";
		mspi-data-rate = "MSPI_DATA_RATE_SINGLE";
		mspi-hardware-ce-num = <0>;
		read-command = <0xEB>;
		write-command = <0x38>;
		command-length = "INSTR_1_BYTE";
		address-length = "ADDR_3_BYTE";
		rx-dummy = <6>;
		tx-dummy = <0>;
		xip-config = <1 0 0 0>;
		ce-break-config = <1024 3>;
            };
        };
    };
};
